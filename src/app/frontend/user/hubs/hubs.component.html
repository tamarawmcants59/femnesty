<section class="section  visitingProfile">
	<div class="container-fluid">
		<div class="row flex-profile">
          <!--<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>-->
			<div class="col-md-3 flex-left">
				<div *ngIf="isloginUser == 1">
				<user-sidebar></user-sidebar>
				</div>
			</div>
			<div class="col-md-6 flex-middle">
				<div class="middlePart">
					<div class="topPart" style="height:195px;" [ngStyle]="{'background-image':'url('+hubDetails.image+')'}"></div>
					<div class="hubDes">
						<h2>{{hubDetails.title}}</h2>
						<!-- <p class="shortP">Hub Short Description</p> -->
						<p class="attendingP">{{hubDetails.attendings}} attending this hub</p>
						<p class="mb-0" *ngIf="loginUserId!=hubDetails.user_id">
							<button type="button" class="btn btn-primary" (click)="attendHub(hubDetails)">{{hubDetails.is_attending?'Unfollow':'Attend'}}</button>
							<a href="http://www.google.com/calendar/event?action=TEMPLATE&text={{hubDetails.title}}
							&dates={{startDateString}}/{{endDateString}}
							&details={{hubDetails.description}}
							&location={{hubDetails.address}}
							" target="_blank" rel="nofollow"><button type="button" class="btn btn-default">Add to calendar</button></a>
							<!--<button type="button" class="btn btn-default">Add to calendar</button>-->
						</p>
					</div>
					<div class="tabPart">
						<ul class="nav nav-pills">
							<li [ngClass]="{'active':activeTab=='posts'}"><a (click)="activeTab='posts'">Hub Activity</a></li>
							<li [ngClass]="{'active':activeTab=='details'}"><a (click)="activeTab='details'">Hub Details</a></li>
							<li [ngClass]="{'active':activeTab=='invite'}"><a (click)="activeTab='invite'">Invite Member</a></li>
						</ul>
						<div class="tab-content">
							<div class="tab-pane fade" [ngClass]="{'in active' : activeTab=='posts'}">
								<div >
									<app-post-create [postType]="groupPostDetData" (getUserPostDetails)="getUserPostDetails()"></app-post-create>
								</div>
								<div *ngIf="groupPostList?.length > 0">
									<div *ngFor="let postData of groupPostList">
										<app-post-card [postData]="postData"></app-post-card>
									</div>
								</div>
								<div class="likePart" *ngIf="groupPostList?.length == 0">
									<div class="row">
										<div class="col-md-10">
											<div class="nothing">Nothing more to show</div>
										</div>
									</div>
								</div>
							</div>
							<div class="tab-pane fade" [ngClass]="{'in active' : activeTab=='details'}">
								<div class="innerRightPart right-map-details HUB-Dtls">
									<h2>{{hubDetails.title}}</h2>
									<p class="HUB-Dtls-txt">{{hubDetails.description}}</p>
									<p class="info" *ngIf="hubDetails.type=='R'">
											{{hubDetails.recurring_start}} to {{hubDetails.recurring_end}}, {{hubDetails.day}}, {{hubDetails.start_time}} - {{hubDetails.end_time}}</p>
									<p class="info" *ngIf="hubDetails.type!='R'">
										<span>Date:</span> {{hubDetails.hub_date}}, {{hubDetails.start_time}} - {{hubDetails.end_time}}</p>
									<p class="info"><span>Organizer:</span> {{hubDetails.organizer}}</p>
									
									<p class="info"><span>Email:</span> {{hubDetails.email}}</p>
									<p class="info"><span>Phone:</span> {{hubDetails.phone}}</p>
									<p class="info"><span>Website:</span> {{hubDetails.website}}</p>
									<p class="info"><span>Privacy:</span> {{hubDetails.type=='O'?'Public':'Private'}}</p>
								</div>
							</div>
							<div class="tab-pane fade" [ngClass]="{'in active' : activeTab=='invite'}">
								<div class="alert alert-success" role="alert" *ngIf="(successMsg != '')">
									<strong>Success: </strong> {{successMsg}}
								</div>
								<div class="form-group row">
									<div class="col-sm-12">
										<form method="post" [formGroup]="postform" (ngSubmit)="sendInvites()" #createGroupForm="ngForm">
											<div class="form-group">
												<select class="form-control" multiple required formControlName="user_ids">
													<option value="{{ user.id }}" *ngFor="let user of uninvitedUsers">{{ user?.first_name }}</option>
												</select>
											</div>
											<!-- <ng-select [multiple]="true" [(ngModel)]="friends" formControlName="user_ids" [items]="items" placeholder="No city selected"></ng-select> -->
											
											<input type="submit" value="Send" class="btn btn-primary">
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-3 flex-right">
				<div class="rightPart">                			
					<div class="innerRightPart right-map-details HUB-Dtls">
						  <h2>{{hubDetails.title}}</h2>	
						  <p class="info" *ngIf="hubDetails.type=='R'">
								<span>Date:</span> <em>{{hubDetails.recurring_start}} to {{hubDetails.recurring_end}},<br/> {{hubDetails.day}},<br/> {{hubDetails.start_time}} - {{hubDetails.end_time}}</em></p>
						<p class="info" *ngIf="hubDetails.type!='R'">
							<span>Date:</span> <em>{{hubDetails.hub_date}}, {{hubDetails.start_time}} - {{hubDetails.end_time}}</em></p>
						  <p class="info"><span>Description:</span><em>{{hubDetails.description}} </em></p>
						
						
						  <p class="info"><span>Organizer:</span> <em>{{hubDetails.organizer}}</em></p>
						
							
						  <p class="info"><span>Email:</span> <em>{{hubDetails.email}}</em></p>
						<p class="info">
							<span>Phone:</span> <em>{{hubDetails.phone}}</em></p>
      					<p class="info"><span>Website:</span> <em>{{hubDetails.website}}</em></p>
      					<p class="info"><span>Privacy:</span> <em>{{hubDetails.type=='O'?'Public':'Private'}}</em></p>
					</div>
					
					<div class="innerRightPart right-map-details HUB-Dtls">
      					<h2>ADDRESS</h2>
      					<div class="right-map">
							<agm-map style="height:133px" [latitude]="hubDetails.lat" [longitude]="hubDetails.lng">
								<agm-marker [latitude]="hubDetails.lat" [longitude]="hubDetails.lng"></agm-marker>
							</agm-map>
							
					        <!-- <iframe width="100%" height="150px" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?hl=en&amp;ie=UTF8&amp;ll={{hubDetails.lat}},{{hubDetails.lng}}&amp;spn=56.506174,79.013672&amp;t=m&amp;z=4&amp;output=embed"></iframe> -->
						</div>
      					<p class="info">{{hubDetails.address}}</p>
					</div>
					
					<div class="innerRightPart right-map-details attending HUB-Dtls">
						<h2>Attending</h2>
						<ul>         
							<li *ngFor="let user of hubDetails.attenders">               
								<a [routerLink]="['/user/profile',user.display_name]" title="{{user.name}}"><img src="{{user.profile_image}}" alt="{{user.name}}"  title="{{user.name}}"/></a>
							</li>
						</ul>
						<a href="javascript:void(0);" *ngIf="hubDetails.attenders>12" class="viewAll text-center">View All ({{hubDetails.attenders.length}})</a>
					</div>
					<!-- <div class="innerRightPart latest-article">
						<h2>Latest Articles</h2>
						<div *ngIf="latestArticles?.length > 0">
							<div class="hubMet hubMet2" *ngFor="let articleData of latestArticles">
								<a [routerLink]="['/articles/details',articleData.slug]">
									<div class="img" [ngStyle]="{'background-image':'url('+articleData.image_url+')'}"></div>
								</a>
								<div class="article-text">
									<p>{{articleData.title | limitTo : 20}}</p>
									<a [routerLink]="['/articles/details',articleData.slug]" class="downtxt">By {{articleData.author_name}} on {{articleData.created_date_mod}}</a>
								</div>
							</div>
						</div>
					</div> -->
    
					<div class="innerRightPart right-map-details right-sharing">
						<h2>Share</h2>
						<!-- Go to www.addthis.com/dashboard to customize your tools -->
						

<!--<button mat-button shareButton="facebook">

	<i class="fa fa-facebook"></i>
</button>
<button mat-raised-button shareButton="twitter">
	<i class="fa fa-twitter"></i>
</button>
<button mat-icon-button shareButton="linkedin">
	<i class="fa fa-linkedin"></i>
</button>-->
						<ul>
							<li>	
								<app-beta-restriction [height]="'40'"	[image] = "'assets/images/facebook.png'">
								</app-beta-restriction>
							</li>

							<!-- <li ceiboShare [facebook]="{u: repoUrl}">
								<img src="assets/images/facebook.png" />
							</li> -->

							<li ceiboShare [linkedIn]="{url:repoUrl, text:hubDetails.description}">
								<img height="40" src="assets/images/linkedin.png" />
							</li>
							<li ceiboShare [twitter]="{url:repoUrl, text:hubDetails.description}">
                  <img height="40" src="assets/images/twitter.png" />
							</li>	
					  </ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>